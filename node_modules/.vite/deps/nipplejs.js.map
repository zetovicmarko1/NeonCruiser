{
  "version": 3,
  "sources": ["../../nipplejs/src/utils.js", "../../nipplejs/src/super.js", "../../nipplejs/src/nipple.js", "../../nipplejs/src/collection.js", "../../nipplejs/src/manager.js", "../../nipplejs/src/index.js"],
  "sourcesContent": ["///////////////////////\r\n///      UTILS      ///\r\n///////////////////////\r\n\r\nexport const distance = (p1, p2) => {\r\n    const dx = p2.x - p1.x;\r\n    const dy = p2.y - p1.y;\r\n\r\n    return Math.sqrt((dx * dx) + (dy * dy));\r\n};\r\n\r\nexport const angle = (p1, p2) => {\r\n    const dx = p2.x - p1.x;\r\n    const dy = p2.y - p1.y;\r\n\r\n    return degrees(Math.atan2(dy, dx));\r\n};\r\n\r\nexport const findCoord = (p, d, a) => {\r\n    const b = {x: 0, y: 0};\r\n    a = radians(a);\r\n    b.x = p.x - d * Math.cos(a);\r\n    b.y = p.y - d * Math.sin(a);\r\n    return b;\r\n};\r\n\r\nexport const radians = (a) => {\r\n    return a * (Math.PI / 180);\r\n};\r\n\r\nexport const degrees = (a) => {\r\n    return a * (180 / Math.PI);\r\n};\r\n\r\nexport const isPressed = (evt) => {\r\n    if (isNaN(evt.buttons)) {\r\n        return evt.pressure !== 0;\r\n    }\r\n    return evt.buttons !== 0;\r\n};\r\n\r\nconst timers = new Map();\r\nexport const throttle = (cb) => {\r\n    if (timers.has(cb)) {\r\n        clearTimeout(timers.get(cb));\r\n    }\r\n    timers.set(cb, setTimeout(cb, 100));\r\n};\r\n\r\nexport const bindEvt = (el, arg, handler) => {\r\n    const types = arg.split(/[ ,]+/g);\r\n    let type;\r\n    for (let i = 0; i < types.length; i += 1) {\r\n        type = types[i];\r\n        if (el.addEventListener) {\r\n            el.addEventListener(type, handler, false);\r\n        } else if (el.attachEvent) {\r\n            el.attachEvent(type, handler);\r\n        }\r\n    }\r\n};\r\n\r\nexport const unbindEvt = (el, arg, handler) => {\r\n    const types = arg.split(/[ ,]+/g);\r\n    let type;\r\n    for (let i = 0; i < types.length; i += 1) {\r\n        type = types[i];\r\n        if (el.removeEventListener) {\r\n            el.removeEventListener(type, handler);\r\n        } else if (el.detachEvent) {\r\n            el.detachEvent(type, handler);\r\n        }\r\n    }\r\n};\r\n\r\nexport const trigger = (el, type, data) => {\r\n    const evt = new CustomEvent(type, data);\r\n    el.dispatchEvent(evt);\r\n};\r\n\r\nexport const prepareEvent = (evt) => {\r\n    evt.preventDefault();\r\n    return evt.type.match(/^touch/) ? evt.changedTouches : evt;\r\n};\r\n\r\nexport const getScroll = () => {\r\n    const x = (window.pageXOffset !== undefined) ?\r\n        window.pageXOffset :\r\n        (document.documentElement || document.body.parentNode || document.body)\r\n            .scrollLeft;\r\n\r\n    const y = (window.pageYOffset !== undefined) ?\r\n        window.pageYOffset :\r\n        (document.documentElement || document.body.parentNode || document.body)\r\n            .scrollTop;\r\n    return {\r\n        x: x,\r\n        y: y\r\n    };\r\n};\r\n\r\nexport const applyPosition = (el, pos) => {\r\n    if (pos.top || pos.right || pos.bottom || pos.left) {\r\n        el.style.top = pos.top;\r\n        el.style.right = pos.right;\r\n        el.style.bottom = pos.bottom;\r\n        el.style.left = pos.left;\r\n    } else {\r\n        el.style.left = pos.x + 'px';\r\n        el.style.top = pos.y + 'px';\r\n    }\r\n};\r\n\r\nexport const getTransitionStyle = (property, values, time) => {\r\n    const obj = configStylePropertyObject(property);\r\n    for (let i in obj) {\r\n        if (obj.hasOwnProperty(i)) {\r\n            if (typeof values === 'string') {\r\n                obj[i] = values + ' ' + time;\r\n            } else {\r\n                let st = '';\r\n                for (let j = 0, max = values.length; j < max; j += 1) {\r\n                    st += values[j] + ' ' + time + ', ';\r\n                }\r\n                obj[i] = st.slice(0, -2);\r\n            }\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\nexport const getVendorStyle = (property, value) => {\r\n    const obj = configStylePropertyObject(property);\r\n    for (let i in obj) {\r\n        if (obj.hasOwnProperty(i)) {\r\n            obj[i] = value;\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\nexport const configStylePropertyObject = (prop) => {\r\n    const obj = {};\r\n    obj[prop] = '';\r\n    const vendors = ['webkit', 'Moz', 'o'];\r\n    vendors.forEach(function (vendor) {\r\n        obj[vendor + prop.charAt(0).toUpperCase() + prop.slice(1)] = '';\r\n    });\r\n    return obj;\r\n};\r\n\r\nexport const extend = (objA, objB) => {\r\n    for (let i in objB) {\r\n        if (objB.hasOwnProperty(i)) {\r\n            objA[i] = objB[i];\r\n        }\r\n    }\r\n    return objA;\r\n};\r\n\r\n// Overwrite only what's already present\r\nexport const safeExtend = (objA, objB) => {\r\n    const obj = {};\r\n    for (let i in objA) {\r\n        if (objA.hasOwnProperty(i) && objB.hasOwnProperty(i)) {\r\n            obj[i] = objB[i];\r\n        } else if (objA.hasOwnProperty(i)) {\r\n            obj[i] = objA[i];\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\n// Map for array or unique item.\r\nexport const map = (ar, fn) => {\r\n    if (ar.length) {\r\n        for (let i = 0, max = ar.length; i < max; i += 1) {\r\n            fn(ar[i]);\r\n        }\r\n    } else {\r\n        fn(ar);\r\n    }\r\n};\r\n\r\n// Clamp position within the range\r\nexport const clamp = (pos, nipplePos, size) => ({\r\n    //                          left-clamping        right-clamping\r\n    x: Math.min(Math.max(pos.x, nipplePos.x - size), nipplePos.x + size),\r\n    //                          top-clamping         bottom-clamping\r\n    y: Math.min(Math.max(pos.y, nipplePos.y - size), nipplePos.y + size)\r\n});\r\n", "///////////////////////\r\n///   SUPER CLASS   ///\r\n///////////////////////\r\nimport * as u from './utils';\r\n\r\n// Constants\r\nvar isTouch = !!('ontouchstart' in window);\r\nvar isPointer = window.PointerEvent ? true : false;\r\nvar isMSPointer = window.MSPointerEvent ? true : false;\r\nvar events = {\r\n    touch: {\r\n        start: 'touchstart',\r\n        move: 'touchmove',\r\n        end: 'touchend, touchcancel'\r\n    },\r\n    mouse: {\r\n        start: 'mousedown',\r\n        move: 'mousemove',\r\n        end: 'mouseup'\r\n    },\r\n    pointer: {\r\n        start: 'pointerdown',\r\n        move: 'pointermove',\r\n        end: 'pointerup, pointercancel'\r\n    },\r\n    MSPointer: {\r\n        start: 'MSPointerDown',\r\n        move: 'MSPointerMove',\r\n        end: 'MSPointerUp'\r\n    }\r\n};\r\nvar toBind;\r\nvar secondBind = {};\r\nif (isPointer) {\r\n    toBind = events.pointer;\r\n} else if (isMSPointer) {\r\n    toBind = events.MSPointer;\r\n} else if (isTouch) {\r\n    toBind = events.touch;\r\n    secondBind = events.mouse;\r\n} else {\r\n    toBind = events.mouse;\r\n}\r\n\r\nfunction Super () {}\r\n\r\n// Basic event system.\r\nSuper.prototype.on = function (arg, cb) {\r\n    var self = this;\r\n    var types = arg.split(/[ ,]+/g);\r\n    var type;\r\n    self._handlers_ = self._handlers_ || {};\r\n\r\n    for (var i = 0; i < types.length; i += 1) {\r\n        type = types[i];\r\n        self._handlers_[type] = self._handlers_[type] || [];\r\n        self._handlers_[type].push(cb);\r\n    }\r\n    return self;\r\n};\r\n\r\nSuper.prototype.off = function (type, cb) {\r\n    var self = this;\r\n    self._handlers_ = self._handlers_ || {};\r\n\r\n    if (type === undefined) {\r\n        self._handlers_ = {};\r\n    } else if (cb === undefined) {\r\n        self._handlers_[type] = null;\r\n    } else if (self._handlers_[type] &&\r\n            self._handlers_[type].indexOf(cb) >= 0) {\r\n        self._handlers_[type].splice(self._handlers_[type].indexOf(cb), 1);\r\n    }\r\n\r\n    return self;\r\n};\r\n\r\nSuper.prototype.trigger = function (arg, data) {\r\n    var self = this;\r\n    var types = arg.split(/[ ,]+/g);\r\n    var type;\r\n    self._handlers_ = self._handlers_ || {};\r\n\r\n    for (var i = 0; i < types.length; i += 1) {\r\n        type = types[i];\r\n        if (self._handlers_[type] && self._handlers_[type].length) {\r\n            self._handlers_[type].forEach(function (handler) {\r\n                handler.call(self, {\r\n                    type: type,\r\n                    target: self\r\n                }, data);\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Configuration\r\nSuper.prototype.config = function (options) {\r\n    var self = this;\r\n    self.options = self.defaults || {};\r\n    if (options) {\r\n        self.options = u.safeExtend(self.options, options);\r\n    }\r\n};\r\n\r\n// Bind internal events.\r\nSuper.prototype.bindEvt = function (el, type) {\r\n    var self = this;\r\n    self._domHandlers_ = self._domHandlers_ || {};\r\n\r\n    self._domHandlers_[type] = function () {\r\n        if (typeof self['on' + type] === 'function') {\r\n            self['on' + type].apply(self, arguments);\r\n        } else {\r\n            // eslint-disable-next-line no-console\r\n            console.warn('[WARNING] : Missing \"on' + type + '\" handler.');\r\n        }\r\n    };\r\n\r\n    u.bindEvt(el, toBind[type], self._domHandlers_[type]);\r\n\r\n    if (secondBind[type]) {\r\n        // Support for both touch and mouse at the same time.\r\n        u.bindEvt(el, secondBind[type], self._domHandlers_[type]);\r\n    }\r\n\r\n    return self;\r\n};\r\n\r\n// Unbind dom events.\r\nSuper.prototype.unbindEvt = function (el, type) {\r\n    var self = this;\r\n    self._domHandlers_ = self._domHandlers_ || {};\r\n\r\n    u.unbindEvt(el, toBind[type], self._domHandlers_[type]);\r\n\r\n    if (secondBind[type]) {\r\n        // Support for both touch and mouse at the same time.\r\n        u.unbindEvt(el, secondBind[type], self._domHandlers_[type]);\r\n    }\r\n\r\n    delete self._domHandlers_[type];\r\n\r\n    return this;\r\n};\r\n\r\nexport default Super;\r\n", "import Super from './super';\r\nimport * as u from './utils';\r\n\r\n///////////////////////\r\n///   THE NIPPLE    ///\r\n///////////////////////\r\n\r\nfunction Nipple (collection, options) {\r\n    this.identifier = options.identifier;\r\n    this.position = options.position;\r\n    this.frontPosition = options.frontPosition;\r\n    this.collection = collection;\r\n\r\n    // Defaults\r\n    this.defaults = {\r\n        size: 100,\r\n        threshold: 0.1,\r\n        color: 'white',\r\n        fadeTime: 250,\r\n        dataOnly: false,\r\n        restJoystick: true,\r\n        restOpacity: 0.5,\r\n        mode: 'dynamic',\r\n        zone: document.body,\r\n        lockX: false,\r\n        lockY: false,\r\n        shape: 'circle'\r\n    };\r\n\r\n    this.config(options);\r\n\r\n    // Overwrites\r\n    if (this.options.mode === 'dynamic') {\r\n        this.options.restOpacity = 0;\r\n    }\r\n\r\n    this.id = Nipple.id;\r\n    Nipple.id += 1;\r\n    this.buildEl()\r\n        .stylize();\r\n\r\n    // Nipple's API.\r\n    this.instance = {\r\n        el: this.ui.el,\r\n        on: this.on.bind(this),\r\n        off: this.off.bind(this),\r\n        show: this.show.bind(this),\r\n        hide: this.hide.bind(this),\r\n        add: this.addToDom.bind(this),\r\n        remove: this.removeFromDom.bind(this),\r\n        destroy: this.destroy.bind(this),\r\n        setPosition:this.setPosition.bind(this),\r\n        resetDirection: this.resetDirection.bind(this),\r\n        computeDirection: this.computeDirection.bind(this),\r\n        trigger: this.trigger.bind(this),\r\n        position: this.position,\r\n        frontPosition: this.frontPosition,\r\n        ui: this.ui,\r\n        identifier: this.identifier,\r\n        id: this.id,\r\n        options: this.options\r\n    };\r\n\r\n    return this.instance;\r\n}\r\n\r\nNipple.prototype = new Super();\r\nNipple.constructor = Nipple;\r\nNipple.id = 0;\r\n\r\n// Build the dom element of the Nipple instance.\r\nNipple.prototype.buildEl = function (options) {\r\n    this.ui = {};\r\n\r\n    if (this.options.dataOnly) {\r\n        return this;\r\n    }\r\n\r\n    this.ui.el = document.createElement('div');\r\n    this.ui.back = document.createElement('div');\r\n    this.ui.front = document.createElement('div');\r\n\r\n    this.ui.el.className = 'nipple collection_' + this.collection.id;\r\n    this.ui.back.className = 'back';\r\n    this.ui.front.className = 'front';\r\n\r\n    this.ui.el.setAttribute('id', 'nipple_' + this.collection.id +\r\n        '_' + this.id);\r\n\r\n    this.ui.el.appendChild(this.ui.back);\r\n    this.ui.el.appendChild(this.ui.front);\r\n\r\n    return this;\r\n};\r\n\r\n// Apply CSS to the Nipple instance.\r\nNipple.prototype.stylize = function () {\r\n    if (this.options.dataOnly) {\r\n        return this;\r\n    }\r\n    var animTime = this.options.fadeTime + 'ms';\r\n    var borderStyle = u.getVendorStyle('borderRadius', '50%');\r\n    var transitStyle = u.getTransitionStyle('transition', 'opacity', animTime);\r\n    var styles = {};\r\n    styles.el = {\r\n        position: 'absolute',\r\n        opacity: this.options.restOpacity,\r\n        display: 'block',\r\n        'zIndex': 999\r\n    };\r\n\r\n    styles.back = {\r\n        position: 'absolute',\r\n        display: 'block',\r\n        width: this.options.size + 'px',\r\n        height: this.options.size + 'px',\r\n        marginLeft: -this.options.size / 2 + 'px',\r\n        marginTop: -this.options.size / 2 + 'px',\r\n        background: this.options.color,\r\n        'opacity': '.5'\r\n    };\r\n\r\n    styles.front = {\r\n        width: this.options.size / 2 + 'px',\r\n        height: this.options.size / 2 + 'px',\r\n        position: 'absolute',\r\n        display: 'block',\r\n        marginLeft: -this.options.size / 4 + 'px',\r\n        marginTop: -this.options.size / 4 + 'px',\r\n        background: this.options.color,\r\n        'opacity': '.5',\r\n        transform: 'translate(0px, 0px)'\r\n    };\r\n\r\n    u.extend(styles.el, transitStyle);\r\n    if(this.options.shape === 'circle'){\r\n        u.extend(styles.back, borderStyle);\r\n    }\r\n    u.extend(styles.front, borderStyle);\r\n\r\n    this.applyStyles(styles);\r\n\r\n    return this;\r\n};\r\n\r\nNipple.prototype.applyStyles = function (styles) {\r\n    // Apply styles\r\n    for (var i in this.ui) {\r\n        if (this.ui.hasOwnProperty(i)) {\r\n            for (var j in styles[i]) {\r\n                this.ui[i].style[j] = styles[i][j];\r\n            }\r\n        }\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\n// Inject the Nipple instance into DOM.\r\nNipple.prototype.addToDom = function () {\r\n    // We're not adding it if we're dataOnly or already in dom.\r\n    if (this.options.dataOnly || document.body.contains(this.ui.el)) {\r\n        return this;\r\n    }\r\n    this.options.zone.appendChild(this.ui.el);\r\n    return this;\r\n};\r\n\r\n// Remove the Nipple instance from DOM.\r\nNipple.prototype.removeFromDom = function () {\r\n    if (this.options.dataOnly || !document.body.contains(this.ui.el)) {\r\n        return this;\r\n    }\r\n    this.options.zone.removeChild(this.ui.el);\r\n    return this;\r\n};\r\n\r\n// Entirely destroy this nipple\r\nNipple.prototype.destroy = function () {\r\n    clearTimeout(this.removeTimeout);\r\n    clearTimeout(this.showTimeout);\r\n    clearTimeout(this.restTimeout);\r\n    this.trigger('destroyed', this.instance);\r\n    this.removeFromDom();\r\n    this.off();\r\n};\r\n\r\n// Fade in the Nipple instance.\r\nNipple.prototype.show = function (cb) {\r\n    var self = this;\r\n\r\n    if (self.options.dataOnly) {\r\n        return self;\r\n    }\r\n\r\n    clearTimeout(self.removeTimeout);\r\n    clearTimeout(self.showTimeout);\r\n    clearTimeout(self.restTimeout);\r\n\r\n    self.addToDom();\r\n\r\n    self.restCallback();\r\n\r\n    setTimeout(function () {\r\n        self.ui.el.style.opacity = 1;\r\n    }, 0);\r\n\r\n    self.showTimeout = setTimeout(function () {\r\n        self.trigger('shown', self.instance);\r\n        if (typeof cb === 'function') {\r\n            cb.call(this);\r\n        }\r\n    }, self.options.fadeTime);\r\n\r\n    return self;\r\n};\r\n\r\n// Fade out the Nipple instance.\r\nNipple.prototype.hide = function (cb) {\r\n    var self = this;\r\n\r\n    if (self.options.dataOnly) {\r\n        return self;\r\n    }\r\n\r\n    self.ui.el.style.opacity = self.options.restOpacity;\r\n\r\n    clearTimeout(self.removeTimeout);\r\n    clearTimeout(self.showTimeout);\r\n    clearTimeout(self.restTimeout);\r\n\r\n    self.removeTimeout = setTimeout(\r\n        function () {\r\n            var display = self.options.mode === 'dynamic' ? 'none' : 'block';\r\n            self.ui.el.style.display = display;\r\n            if (typeof cb === 'function') {\r\n                cb.call(self);\r\n            }\r\n\r\n            self.trigger('hidden', self.instance);\r\n        },\r\n        self.options.fadeTime\r\n    );\r\n\r\n    if (self.options.restJoystick) {\r\n        const rest = self.options.restJoystick;\r\n        const newPosition = {};\r\n\r\n        newPosition.x = rest === true || rest.x !== false ? 0 : self.instance.frontPosition.x;\r\n        newPosition.y = rest === true || rest.y !== false ? 0 : self.instance.frontPosition.y;\r\n\r\n        self.setPosition(cb, newPosition);\r\n    }\r\n\r\n    return self;\r\n};\r\n\r\n// Set the nipple to the specified position\r\nNipple.prototype.setPosition = function (cb, position) {\r\n    var self = this;\r\n    self.frontPosition = {\r\n        x: position.x,\r\n        y: position.y\r\n    };\r\n    var animTime = self.options.fadeTime + 'ms';\r\n\r\n    var transitStyle = {};\r\n    transitStyle.front = u.getTransitionStyle('transition',\r\n        ['transform'], animTime);\r\n\r\n    var styles = {front: {}};\r\n    styles.front = {\r\n        transform: 'translate(' + self.frontPosition.x + 'px,' + self.frontPosition.y + 'px)'\r\n    };\r\n\r\n    self.applyStyles(transitStyle);\r\n    self.applyStyles(styles);\r\n\r\n    self.restTimeout = setTimeout(\r\n        function () {\r\n            if (typeof cb === 'function') {\r\n                cb.call(self);\r\n            }\r\n            self.restCallback();\r\n        },\r\n        self.options.fadeTime\r\n    );\r\n};\r\n\r\nNipple.prototype.restCallback = function () {\r\n    var self = this;\r\n    var transitStyle = {};\r\n    transitStyle.front = u.getTransitionStyle('transition', 'none', '');\r\n    self.applyStyles(transitStyle);\r\n    self.trigger('rested', self.instance);\r\n};\r\n\r\nNipple.prototype.resetDirection = function () {\r\n    // Fully rebuild the object to let the iteration possible.\r\n    this.direction = {\r\n        x: false,\r\n        y: false,\r\n        angle: false\r\n    };\r\n};\r\n\r\nNipple.prototype.computeDirection = function (obj) {\r\n    var rAngle = obj.angle.radian;\r\n    var angle45 = Math.PI / 4;\r\n    var angle90 = Math.PI / 2;\r\n    var direction, directionX, directionY;\r\n\r\n    // Angular direction\r\n    //     \\  UP /\r\n    //      \\   /\r\n    // LEFT       RIGHT\r\n    //      /   \\\r\n    //     /DOWN \\\r\n    //\r\n    if (\r\n        rAngle > angle45 &&\r\n        rAngle < (angle45 * 3) &&\r\n        !obj.lockX\r\n    ) {\r\n        direction = 'up';\r\n    } else if (\r\n        rAngle > -angle45 &&\r\n        rAngle <= angle45 &&\r\n        !obj.lockY\r\n    ) {\r\n        direction = 'left';\r\n    } else if (\r\n        rAngle > (-angle45 * 3) &&\r\n        rAngle <= -angle45 &&\r\n        !obj.lockX\r\n    ) {\r\n        direction = 'down';\r\n    } else if (!obj.lockY) {\r\n        direction = 'right';\r\n    }\r\n\r\n    // Plain direction\r\n    //    UP                 |\r\n    // _______               | RIGHT\r\n    //                  LEFT |\r\n    //   DOWN                |\r\n    if (!obj.lockY) {\r\n        if (rAngle > -angle90 && rAngle < angle90) {\r\n            directionX = 'left';\r\n        } else {\r\n            directionX = 'right';\r\n        }\r\n    }\r\n\r\n    if (!obj.lockX) {\r\n        if (rAngle > 0) {\r\n            directionY = 'up';\r\n        } else {\r\n            directionY = 'down';\r\n        }\r\n    }\r\n\r\n    if (obj.force > this.options.threshold) {\r\n        var oldDirection = {};\r\n        var i;\r\n        for (i in this.direction) {\r\n            if (this.direction.hasOwnProperty(i)) {\r\n                oldDirection[i] = this.direction[i];\r\n            }\r\n        }\r\n\r\n        var same = {};\r\n\r\n        this.direction = {\r\n            x: directionX,\r\n            y: directionY,\r\n            angle: direction\r\n        };\r\n\r\n        obj.direction = this.direction;\r\n\r\n        for (i in oldDirection) {\r\n            if (oldDirection[i] === this.direction[i]) {\r\n                same[i] = true;\r\n            }\r\n        }\r\n\r\n        // If all 3 directions are the same, we don't trigger anything.\r\n        if (same.x && same.y && same.angle) {\r\n            return obj;\r\n        }\r\n\r\n        if (!same.x || !same.y) {\r\n            this.trigger('plain', obj);\r\n        }\r\n\r\n        if (!same.x) {\r\n            this.trigger('plain:' + directionX, obj);\r\n        }\r\n\r\n        if (!same.y) {\r\n            this.trigger('plain:' + directionY, obj);\r\n        }\r\n\r\n        if (!same.angle) {\r\n            this.trigger('dir dir:' + direction, obj);\r\n        }\r\n    } else {\r\n        this.resetDirection();\r\n    }\r\n\r\n    return obj;\r\n};\r\n\r\nexport default Nipple;\r\n", "import Nipple from './nipple';\r\nimport Super from './super';\r\nimport * as u from './utils';\r\n\r\n///////////////////////////\r\n///   THE COLLECTION    ///\r\n///////////////////////////\r\n\r\nfunction Collection (manager, options) {\r\n    var self = this;\r\n    self.nipples = [];\r\n    self.idles = [];\r\n    self.actives = [];\r\n    self.ids = [];\r\n    self.pressureIntervals = {};\r\n    self.manager = manager;\r\n    self.id = Collection.id;\r\n    Collection.id += 1;\r\n\r\n    // Defaults\r\n    self.defaults = {\r\n        zone: document.body,\r\n        multitouch: false,\r\n        maxNumberOfNipples: 10,\r\n        mode: 'dynamic',\r\n        position: {top: 0, left: 0},\r\n        catchDistance: 200,\r\n        size: 100,\r\n        threshold: 0.1,\r\n        color: 'white',\r\n        fadeTime: 250,\r\n        dataOnly: false,\r\n        restJoystick: true,\r\n        restOpacity: 0.5,\r\n        lockX: false,\r\n        lockY: false,\r\n        shape: 'circle',\r\n        dynamicPage: false,\r\n        follow: false\r\n    };\r\n\r\n    self.config(options);\r\n\r\n    // Overwrites\r\n    if (self.options.mode === 'static' || self.options.mode === 'semi') {\r\n        self.options.multitouch = false;\r\n    }\r\n\r\n    if (!self.options.multitouch) {\r\n        self.options.maxNumberOfNipples = 1;\r\n    }\r\n    const computedStyle = getComputedStyle(self.options.zone.parentElement);\r\n    if (computedStyle && computedStyle.display === 'flex') {\r\n        self.parentIsFlex = true;\r\n    }\r\n\r\n    self.updateBox();\r\n    self.prepareNipples();\r\n    self.bindings();\r\n    self.begin();\r\n\r\n    return self.nipples;\r\n}\r\n\r\nCollection.prototype = new Super();\r\nCollection.constructor = Collection;\r\nCollection.id = 0;\r\n\r\nCollection.prototype.prepareNipples = function () {\r\n    var self = this;\r\n    var nips = self.nipples;\r\n\r\n    // Public API Preparation.\r\n    nips.on = self.on.bind(self);\r\n    nips.off = self.off.bind(self);\r\n    nips.options = self.options;\r\n    nips.destroy = self.destroy.bind(self);\r\n    nips.ids = self.ids;\r\n    nips.id = self.id;\r\n    nips.processOnMove = self.processOnMove.bind(self);\r\n    nips.processOnEnd = self.processOnEnd.bind(self);\r\n    nips.get = function (id) {\r\n        if (id === undefined) {\r\n            return nips[0];\r\n        }\r\n        for (var i = 0, max = nips.length; i < max; i += 1) {\r\n            if (nips[i].identifier === id) {\r\n                return nips[i];\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n};\r\n\r\nCollection.prototype.bindings = function () {\r\n    var self = this;\r\n    // Touch start event.\r\n    self.bindEvt(self.options.zone, 'start');\r\n    // Avoid native touch actions (scroll, zoom etc...) on the zone.\r\n    self.options.zone.style.touchAction = 'none';\r\n    self.options.zone.style.msTouchAction = 'none';\r\n};\r\n\r\nCollection.prototype.begin = function () {\r\n    var self = this;\r\n    var opts = self.options;\r\n\r\n    // We place our static nipple\r\n    // if needed.\r\n    if (opts.mode === 'static') {\r\n        var nipple = self.createNipple(\r\n            opts.position,\r\n            self.manager.getIdentifier()\r\n        );\r\n        // Add it to the dom.\r\n        nipple.add();\r\n        // Store it in idles.\r\n        self.idles.push(nipple);\r\n    }\r\n};\r\n\r\n// Nipple Factory\r\nCollection.prototype.createNipple = function (position, identifier) {\r\n    var self = this;\r\n    var scroll = self.manager.scroll;\r\n    var toPutOn = {};\r\n    var opts = self.options;\r\n    var offset = {\r\n        x: self.parentIsFlex ? scroll.x : (scroll.x + self.box.left),\r\n        y: self.parentIsFlex ? scroll.y : (scroll.y + self.box.top)\r\n    };\r\n\r\n    if (position.x && position.y) {\r\n        toPutOn = {\r\n            x: position.x - offset.x,\r\n            y: position.y - offset.y\r\n        };\r\n    } else if (\r\n        position.top ||\r\n        position.right ||\r\n        position.bottom ||\r\n        position.left\r\n    ) {\r\n\r\n        // We need to compute the position X / Y of the joystick.\r\n        var dumb = document.createElement('DIV');\r\n        dumb.style.display = 'hidden';\r\n        dumb.style.top = position.top;\r\n        dumb.style.right = position.right;\r\n        dumb.style.bottom = position.bottom;\r\n        dumb.style.left = position.left;\r\n        dumb.style.position = 'absolute';\r\n\r\n        opts.zone.appendChild(dumb);\r\n        var dumbBox = dumb.getBoundingClientRect();\r\n        opts.zone.removeChild(dumb);\r\n\r\n        toPutOn = position;\r\n        position = {\r\n            x: dumbBox.left + scroll.x,\r\n            y: dumbBox.top + scroll.y\r\n        };\r\n    }\r\n\r\n    var nipple = new Nipple(self, {\r\n        color: opts.color,\r\n        size: opts.size,\r\n        threshold: opts.threshold,\r\n        fadeTime: opts.fadeTime,\r\n        dataOnly: opts.dataOnly,\r\n        restJoystick: opts.restJoystick,\r\n        restOpacity: opts.restOpacity,\r\n        mode: opts.mode,\r\n        identifier: identifier,\r\n        position: position,\r\n        zone: opts.zone,\r\n        frontPosition: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        shape: opts.shape\r\n    });\r\n\r\n    if (!opts.dataOnly) {\r\n        u.applyPosition(nipple.ui.el, toPutOn);\r\n        u.applyPosition(nipple.ui.front, nipple.frontPosition);\r\n    }\r\n    self.nipples.push(nipple);\r\n    self.trigger('added ' + nipple.identifier + ':added', nipple);\r\n    self.manager.trigger('added ' + nipple.identifier + ':added', nipple);\r\n\r\n    self.bindNipple(nipple);\r\n\r\n    return nipple;\r\n};\r\n\r\nCollection.prototype.updateBox = function () {\r\n    var self = this;\r\n    self.box = self.options.zone.getBoundingClientRect();\r\n};\r\n\r\nCollection.prototype.bindNipple = function (nipple) {\r\n    var self = this;\r\n    var type;\r\n    // Bubble up identified events.\r\n    var handler = function (evt, data) {\r\n        // Identify the event type with the nipple's id.\r\n        type = evt.type + ' ' + data.id + ':' + evt.type;\r\n        self.trigger(type, data);\r\n    };\r\n\r\n    // When it gets destroyed.\r\n    nipple.on('destroyed', self.onDestroyed.bind(self));\r\n\r\n    // Other events that will get bubbled up.\r\n    nipple.on('shown hidden rested dir plain', handler);\r\n    nipple.on('dir:up dir:right dir:down dir:left', handler);\r\n    nipple.on('plain:up plain:right plain:down plain:left', handler);\r\n};\r\n\r\nCollection.prototype.pressureFn = function (touch, nipple, identifier) {\r\n    var self = this;\r\n    var previousPressure = 0;\r\n    clearInterval(self.pressureIntervals[identifier]);\r\n    // Create an interval that will read the pressure every 100ms\r\n    self.pressureIntervals[identifier] = setInterval(function () {\r\n        var pressure = touch.force || touch.pressure ||\r\n            touch.webkitForce || 0;\r\n        if (pressure !== previousPressure) {\r\n            nipple.trigger('pressure', pressure);\r\n            self.trigger('pressure ' +\r\n                nipple.identifier + ':pressure', pressure);\r\n            previousPressure = pressure;\r\n        }\r\n    }.bind(self), 100);\r\n};\r\n\r\nCollection.prototype.onstart = function (evt) {\r\n    var self = this;\r\n    var opts = self.options;\r\n    var origEvt = evt;\r\n    evt = u.prepareEvent(evt);\r\n\r\n    // Update the box position\r\n    self.updateBox();\r\n\r\n    var process = function (touch) {\r\n        // If we can create new nipples\r\n        // meaning we don't have more active nipples than we should.\r\n        if (self.actives.length < opts.maxNumberOfNipples) {\r\n            self.processOnStart(touch);\r\n        }\r\n        else if(origEvt.type.match(/^touch/)){\r\n            // zombies occur when end event is not received on Safari\r\n            // first touch removed before second touch, we need to catch up...\r\n            // so remove where touches in manager that no longer exist\r\n            Object.keys(self.manager.ids).forEach(function(k){\r\n                if(Object.values(origEvt.touches).findIndex(function(t){return t.identifier===k;}) < 0){\r\n                    // manager has id that doesn't exist in touches\r\n                    var e = [evt[0]];\r\n                    e.identifier = k;\r\n                    self.processOnEnd(e);\r\n                }\r\n            });\r\n            if(self.actives.length < opts.maxNumberOfNipples){\r\n                self.processOnStart(touch);\r\n            }\r\n        }\r\n    };\r\n\r\n    u.map(evt, process);\r\n\r\n    // We ask upstream to bind the document\r\n    // on 'move' and 'end'\r\n    self.manager.bindDocument();\r\n    return false;\r\n};\r\n\r\nCollection.prototype.processOnStart = function (evt) {\r\n    var self = this;\r\n    var opts = self.options;\r\n    var indexInIdles;\r\n    var identifier = self.manager.getIdentifier(evt);\r\n    var pressure = evt.force || evt.pressure || evt.webkitForce || 0;\r\n    var position = {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n    };\r\n\r\n    var nipple = self.getOrCreate(identifier, position);\r\n\r\n    // Update its touch identifier\r\n    if (nipple.identifier !== identifier) {\r\n        self.manager.removeIdentifier(nipple.identifier);\r\n    }\r\n    nipple.identifier = identifier;\r\n\r\n    var process = function (nip) {\r\n        // Trigger the start.\r\n        nip.trigger('start', nip);\r\n        self.trigger('start ' + nip.id + ':start', nip);\r\n\r\n        nip.show();\r\n        if (pressure > 0) {\r\n            self.pressureFn(evt, nip, nip.identifier);\r\n        }\r\n        // Trigger the first move event.\r\n        self.processOnMove(evt);\r\n    };\r\n\r\n    // Transfer it from idles to actives.\r\n    if ((indexInIdles = self.idles.indexOf(nipple)) >= 0) {\r\n        self.idles.splice(indexInIdles, 1);\r\n    }\r\n\r\n    // Store the nipple in the actives array\r\n    self.actives.push(nipple);\r\n    self.ids.push(nipple.identifier);\r\n\r\n    if (opts.mode !== 'semi') {\r\n        process(nipple);\r\n    } else {\r\n        // In semi we check the distance of the touch\r\n        // to decide if we have to reset the nipple\r\n        var distance = u.distance(position, nipple.position);\r\n        if (distance <= opts.catchDistance) {\r\n            process(nipple);\r\n        } else {\r\n            nipple.destroy();\r\n            self.processOnStart(evt);\r\n            return;\r\n        }\r\n    }\r\n\r\n    return nipple;\r\n};\r\n\r\nCollection.prototype.getOrCreate = function (identifier, position) {\r\n    var self = this;\r\n    var opts = self.options;\r\n    var nipple;\r\n\r\n    // If we're in static or semi, we might already have an active.\r\n    if (/(semi|static)/.test(opts.mode)) {\r\n        // Get the active one.\r\n        // TODO: Multi-touche for semi and static will start here.\r\n        // Return the nearest one.\r\n        nipple = self.idles[0];\r\n        if (nipple) {\r\n            self.idles.splice(0, 1);\r\n            return nipple;\r\n        }\r\n\r\n        if (opts.mode === 'semi') {\r\n            // If we're in semi mode, we need to create one.\r\n            return self.createNipple(position, identifier);\r\n        }\r\n\r\n        // eslint-disable-next-line no-console\r\n        console.warn('Coudln\\'t find the needed nipple.');\r\n        return false;\r\n    }\r\n    // In dynamic, we create a new one.\r\n    nipple = self.createNipple(position, identifier);\r\n    return nipple;\r\n};\r\n\r\nCollection.prototype.processOnMove = function (evt) {\r\n    var self = this;\r\n    var opts = self.options;\r\n    var identifier = self.manager.getIdentifier(evt);\r\n    var nipple = self.nipples.get(identifier);\r\n    var scroll = self.manager.scroll;\r\n\r\n    // If we're moving without pressing\r\n    // it's that we went out the active zone\r\n    if (!u.isPressed(evt)) {\r\n        this.processOnEnd(evt);\r\n        return;\r\n    }\r\n\r\n    if (!nipple) {\r\n        // This is here just for safety.\r\n        // It shouldn't happen.\r\n        // eslint-disable-next-line no-console\r\n        console.error('Found zombie joystick with ID ' + identifier);\r\n        self.manager.removeIdentifier(identifier);\r\n        return;\r\n    }\r\n\r\n    if (opts.dynamicPage) {\r\n        var elBox = nipple.el.getBoundingClientRect();\r\n        nipple.position = {\r\n            x: scroll.x + elBox.left,\r\n            y: scroll.y + elBox.top\r\n        };\r\n    }\r\n\r\n    nipple.identifier = identifier;\r\n\r\n    var size = nipple.options.size / 2;\r\n    var pos = {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n    };\r\n\r\n    if (opts.lockX){\r\n        pos.y = nipple.position.y;\r\n    }\r\n    if (opts.lockY) {\r\n        pos.x = nipple.position.x;\r\n    }\r\n\r\n    var dist = u.distance(pos, nipple.position);\r\n    var angle = u.angle(pos, nipple.position);\r\n    var rAngle = u.radians(angle);\r\n    var force = dist / size;\r\n\r\n    var raw = {\r\n        distance: dist,\r\n        position: pos\r\n    };\r\n\r\n    // Clamp the position\r\n    var clamped_dist;\r\n    var clamped_pos;\r\n    if (nipple.options.shape === 'circle') {\r\n        // Clamp to a circle\r\n        clamped_dist = Math.min(dist, size);\r\n        clamped_pos = u.findCoord(nipple.position, clamped_dist, angle);\r\n    } else {\r\n        // Clamp to a square\r\n        clamped_pos = u.clamp(pos, nipple.position, size);\r\n        clamped_dist = u.distance(clamped_pos, nipple.position);\r\n    }\r\n\r\n    if (opts.follow) {\r\n        // follow behaviour\r\n        if (dist > size) {\r\n            let delta_x = pos.x - clamped_pos.x;\r\n            let delta_y = pos.y - clamped_pos.y;\r\n            nipple.position.x += delta_x;\r\n            nipple.position.y += delta_y;\r\n            nipple.el.style.top = (nipple.position.y - (self.box.top + scroll.y)) + 'px';\r\n            nipple.el.style.left = (nipple.position.x - (self.box.left + scroll.x)) + 'px';\r\n\r\n            dist = u.distance(pos, nipple.position);\r\n        }\r\n    } else {\r\n        // clamp behaviour\r\n        pos = clamped_pos;\r\n        dist = clamped_dist;\r\n    }\r\n\r\n    var xPosition = pos.x - nipple.position.x;\r\n    var yPosition = pos.y - nipple.position.y;\r\n\r\n    nipple.frontPosition = {\r\n        x: xPosition,\r\n        y: yPosition\r\n    };\r\n\r\n    if (!opts.dataOnly) {\r\n        nipple.ui.front.style.transform = 'translate(' + xPosition + 'px,' + yPosition + 'px)';\r\n    }\r\n\r\n    // Prepare event's datas.\r\n    var toSend = {\r\n        identifier: nipple.identifier,\r\n        position: pos,\r\n        force: force,\r\n        pressure: evt.force || evt.pressure || evt.webkitForce || 0,\r\n        distance: dist,\r\n        angle: {\r\n            radian: rAngle,\r\n            degree: angle\r\n        },\r\n        vector: {\r\n            x: xPosition / size,\r\n            y: - yPosition / size\r\n        },\r\n        raw: raw,\r\n        instance: nipple,\r\n        lockX: opts.lockX,\r\n        lockY: opts.lockY\r\n    };\r\n\r\n    // Compute the direction's datas.\r\n    toSend = nipple.computeDirection(toSend);\r\n\r\n    // Offset angles to follow units circle.\r\n    toSend.angle = {\r\n        radian: u.radians(180 - angle),\r\n        degree: 180 - angle\r\n    };\r\n\r\n    // Send everything to everyone.\r\n    nipple.trigger('move', toSend);\r\n    self.trigger('move ' + nipple.id + ':move', toSend);\r\n};\r\n\r\nCollection.prototype.processOnEnd = function (evt) {\r\n    var self = this;\r\n    var opts = self.options;\r\n    var identifier = self.manager.getIdentifier(evt);\r\n    var nipple = self.nipples.get(identifier);\r\n    var removedIdentifier = self.manager.removeIdentifier(nipple.identifier);\r\n\r\n    if (!nipple) {\r\n        return;\r\n    }\r\n\r\n    if (!opts.dataOnly) {\r\n        nipple.hide(function () {\r\n            if (opts.mode === 'dynamic') {\r\n                nipple.trigger('removed', nipple);\r\n                self.trigger('removed ' + nipple.id + ':removed', nipple);\r\n                self.manager\r\n                    .trigger('removed ' + nipple.id + ':removed', nipple);\r\n                nipple.destroy();\r\n            }\r\n        });\r\n    }\r\n\r\n    // Clear the pressure interval reader\r\n    clearInterval(self.pressureIntervals[nipple.identifier]);\r\n\r\n    // Reset the direciton of the nipple, to be able to trigger a new direction\r\n    // on start.\r\n    nipple.resetDirection();\r\n\r\n    nipple.trigger('end', nipple);\r\n    self.trigger('end ' + nipple.id + ':end', nipple);\r\n\r\n    // Remove identifier from our bank.\r\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\r\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\r\n    }\r\n\r\n    // Clean our actives array.\r\n    if (self.actives.indexOf(nipple) >= 0) {\r\n        self.actives.splice(self.actives.indexOf(nipple), 1);\r\n    }\r\n\r\n    if (/(semi|static)/.test(opts.mode)) {\r\n        // Transfer nipple from actives to idles\r\n        // if we're in semi or static mode.\r\n        self.idles.push(nipple);\r\n    } else if (self.nipples.indexOf(nipple) >= 0) {\r\n        // Only if we're not in semi or static mode\r\n        // we can remove the instance.\r\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\r\n    }\r\n\r\n    // We unbind move and end.\r\n    self.manager.unbindDocument();\r\n\r\n    // We add back the identifier of the idle nipple;\r\n    if (/(semi|static)/.test(opts.mode)) {\r\n        self.manager.ids[removedIdentifier.id] = removedIdentifier.identifier;\r\n    }\r\n};\r\n\r\n// Remove destroyed nipple from the lists\r\nCollection.prototype.onDestroyed = function(evt, nipple) {\r\n    var self = this;\r\n    if (self.nipples.indexOf(nipple) >= 0) {\r\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\r\n    }\r\n    if (self.actives.indexOf(nipple) >= 0) {\r\n        self.actives.splice(self.actives.indexOf(nipple), 1);\r\n    }\r\n    if (self.idles.indexOf(nipple) >= 0) {\r\n        self.idles.splice(self.idles.indexOf(nipple), 1);\r\n    }\r\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\r\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\r\n    }\r\n\r\n    // Remove the identifier from our bank\r\n    self.manager.removeIdentifier(nipple.identifier);\r\n\r\n    // We unbind move and end.\r\n    self.manager.unbindDocument();\r\n};\r\n\r\n// Cleanly destroy the manager\r\nCollection.prototype.destroy = function () {\r\n    var self = this;\r\n    self.unbindEvt(self.options.zone, 'start');\r\n\r\n    // Destroy nipples.\r\n    self.nipples.forEach(function(nipple) {\r\n        nipple.destroy();\r\n    });\r\n\r\n    // Clean 3DTouch intervals.\r\n    for (var i in self.pressureIntervals) {\r\n        if (self.pressureIntervals.hasOwnProperty(i)) {\r\n            clearInterval(self.pressureIntervals[i]);\r\n        }\r\n    }\r\n\r\n    // Notify the manager passing the instance\r\n    self.trigger('destroyed', self.nipples);\r\n    // We unbind move and end.\r\n    self.manager.unbindDocument();\r\n    // Unbind everything.\r\n    self.off();\r\n};\r\n\r\nexport default Collection;\r\n", "import Collection from './collection';\r\nimport Super from './super';\r\nimport * as u from './utils';\r\n\r\n///////////////////////\r\n///     MANAGER     ///\r\n///////////////////////\r\n\r\nfunction Manager (options) {\r\n    var self = this;\r\n    self.ids = {};\r\n    self.index = 0;\r\n    self.collections = [];\r\n    self.scroll = u.getScroll();\r\n\r\n    self.config(options);\r\n    self.prepareCollections();\r\n\r\n    // Listen for resize, to reposition every joysticks\r\n    var resizeHandler = function () {\r\n        var pos;\r\n        self.collections.forEach(function (collection) {\r\n            collection.forEach(function (nipple) {\r\n                pos = nipple.el.getBoundingClientRect();\r\n                nipple.position = {\r\n                    x: self.scroll.x + pos.left,\r\n                    y: self.scroll.y + pos.top\r\n                };\r\n            });\r\n        });\r\n    };\r\n    u.bindEvt(window, 'resize', function () {\r\n        u.throttle(resizeHandler);\r\n    });\r\n\r\n    // Listen for scrolls, so we have a global scroll value\r\n    // without having to request it all the time.\r\n    var scrollHandler = function () {\r\n        self.scroll = u.getScroll();\r\n    };\r\n    u.bindEvt(window, 'scroll', function () {\r\n        u.throttle(scrollHandler);\r\n    });\r\n\r\n    return self.collections;\r\n}\r\n\r\nManager.prototype = new Super();\r\nManager.constructor = Manager;\r\n\r\nManager.prototype.prepareCollections = function () {\r\n    var self = this;\r\n    // Public API Preparation.\r\n    self.collections.create = self.create.bind(self);\r\n    // Listen to anything\r\n    self.collections.on = self.on.bind(self);\r\n    // Unbind general events\r\n    self.collections.off = self.off.bind(self);\r\n    // Destroy everything\r\n    self.collections.destroy = self.destroy.bind(self);\r\n    // Get any nipple\r\n    self.collections.get = function (id) {\r\n        var nipple;\r\n        // Use .every() to break the loop as soon as found.\r\n        self.collections.every(function (collection) {\r\n            nipple = collection.get(id);\r\n            return nipple ? false : true;\r\n        });\r\n        return nipple;\r\n    };\r\n};\r\n\r\nManager.prototype.create = function (options) {\r\n    return this.createCollection(options);\r\n};\r\n\r\n// Collection Factory\r\nManager.prototype.createCollection = function (options) {\r\n    var self = this;\r\n    var collection = new Collection(self, options);\r\n\r\n    self.bindCollection(collection);\r\n    self.collections.push(collection);\r\n\r\n    return collection;\r\n};\r\n\r\nManager.prototype.bindCollection = function (collection) {\r\n    var self = this;\r\n    var type;\r\n    // Bubble up identified events.\r\n    var handler = function (evt, data) {\r\n        // Identify the event type with the nipple's identifier.\r\n        type = evt.type + ' ' + data.id + ':' + evt.type;\r\n        self.trigger(type, data);\r\n    };\r\n\r\n    // When it gets destroyed we clean.\r\n    collection.on('destroyed', self.onDestroyed.bind(self));\r\n\r\n    // Other events that will get bubbled up.\r\n    collection.on('shown hidden rested dir plain', handler);\r\n    collection.on('dir:up dir:right dir:down dir:left', handler);\r\n    collection.on('plain:up plain:right plain:down plain:left', handler);\r\n};\r\n\r\nManager.prototype.bindDocument = function () {\r\n    var self = this;\r\n    // Bind only if not already binded\r\n    if (!self.binded) {\r\n        self.bindEvt(document, 'move')\r\n            .bindEvt(document, 'end');\r\n        self.binded = true;\r\n    }\r\n};\r\n\r\nManager.prototype.unbindDocument = function (force) {\r\n    var self = this;\r\n    // If there are no touch left\r\n    // unbind the document.\r\n    if (!Object.keys(self.ids).length || force === true) {\r\n        self.unbindEvt(document, 'move')\r\n            .unbindEvt(document, 'end');\r\n        self.binded = false;\r\n    }\r\n};\r\n\r\nManager.prototype.getIdentifier = function (evt) {\r\n    var id;\r\n    // If no event, simple increment\r\n    if (!evt) {\r\n        id = this.index;\r\n    } else {\r\n        // Extract identifier from event object.\r\n        // Unavailable in mouse events so replaced by latest increment.\r\n        id = evt.identifier === undefined ? evt.pointerId : evt.identifier;\r\n        if (id === undefined) {\r\n            id = this.latest || 0;\r\n        }\r\n    }\r\n\r\n    if (this.ids[id] === undefined) {\r\n        this.ids[id] = this.index;\r\n        this.index += 1;\r\n    }\r\n\r\n    // Keep the latest id used in case we're using an unidentified mouseEvent\r\n    this.latest = id;\r\n    return this.ids[id];\r\n};\r\n\r\nManager.prototype.removeIdentifier = function (identifier) {\r\n    var removed = {};\r\n    for (var id in this.ids) {\r\n        if (this.ids[id] === identifier) {\r\n            removed.id = id;\r\n            removed.identifier = this.ids[id];\r\n            delete this.ids[id];\r\n            break;\r\n        }\r\n    }\r\n    return removed;\r\n};\r\n\r\nManager.prototype.onmove = function (evt) {\r\n    var self = this;\r\n    self.onAny('move', evt);\r\n    return false;\r\n};\r\n\r\nManager.prototype.onend = function (evt) {\r\n    var self = this;\r\n    self.onAny('end', evt);\r\n    return false;\r\n};\r\n\r\nManager.prototype.oncancel = function (evt) {\r\n    var self = this;\r\n    self.onAny('end', evt);\r\n    return false;\r\n};\r\n\r\nManager.prototype.onAny = function (which, evt) {\r\n    var self = this;\r\n    var id;\r\n    var processFn = 'processOn' + which.charAt(0).toUpperCase() +\r\n        which.slice(1);\r\n    evt = u.prepareEvent(evt);\r\n    var processColl = function (e, id, coll) {\r\n        if (coll.ids.indexOf(id) >= 0) {\r\n            coll[processFn](e);\r\n            // Mark the event to avoid cleaning it later.\r\n            e._found_ = true;\r\n        }\r\n    };\r\n    var processEvt = function (e) {\r\n        id = self.getIdentifier(e);\r\n        u.map(self.collections, processColl.bind(null, e, id));\r\n        // If the event isn't handled by any collection,\r\n        // we need to clean its identifier.\r\n        if (!e._found_) {\r\n            self.removeIdentifier(id);\r\n        }\r\n    };\r\n\r\n    u.map(evt, processEvt);\r\n\r\n    return false;\r\n};\r\n\r\n// Cleanly destroy the manager\r\nManager.prototype.destroy = function () {\r\n    var self = this;\r\n    self.unbindDocument(true);\r\n    self.ids = {};\r\n    self.index = 0;\r\n    self.collections.forEach(function(collection) {\r\n        collection.destroy();\r\n    });\r\n    self.off();\r\n};\r\n\r\n// When a collection gets destroyed\r\n// we clean behind.\r\nManager.prototype.onDestroyed = function (evt, coll) {\r\n    var self = this;\r\n    if (self.collections.indexOf(coll) < 0) {\r\n        return false;\r\n    }\r\n    self.collections.splice(self.collections.indexOf(coll), 1);\r\n};\r\n\r\nexport default Manager;\r\n", "import Manager from './manager';\r\n\r\nconst factory = new Manager();\r\nexport default {\r\n    create: function (options) {\r\n        return factory.create(options);\r\n    },\r\n    factory: factory\r\n};\r\n"],
  "mappings": "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",
  "names": ["distance", "angle", "id"]
}
